import { DuplicateColumnsError, IdentiferCase, LibPgQueryAST, PostgresError } from "@ts-safeql/shared";
import { either } from "fp-ts";
import postgres from "postgres";
type JSToPostgresTypeMap = Record<string, unknown>;
type Sql = postgres.Sql<JSToPostgresTypeMap>;
export type GenerateResult = {
    result: [string, string][] | null;
    stmt: postgres.Statement;
    query: string;
};
export type GenerateError = DuplicateColumnsError | PostgresError;
type CacheKey = string;
type OverrideValue = string | {
    parameter: string | {
        regex: string;
    };
    return: string;
};
export interface GenerateParams {
    sql: Sql;
    query: string;
    pgParsed: LibPgQueryAST.ParseResult;
    cacheMetadata?: boolean;
    cacheKey: CacheKey;
    fieldTransform: IdentiferCase | undefined;
    nullAsUndefined?: boolean;
    nullAsOptional?: boolean;
    overrides?: Partial<{
        types: Record<string, OverrideValue>;
    }>;
}
export declare function createGenerator(): {
    generate: (params: GenerateParams) => Promise<either.Either<GenerateError, GenerateResult>>;
    dropCacheKey: (cacheKey: CacheKey) => boolean;
    clearCache: () => void;
};
export {};
